<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link rel="stylesheet" type="text/css" href="css\css_main.css">
  <link rel="stylesheet" type="text/css" href="css\Calendar.css">
  <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script>
    function salaryCalcziak(){
    var salary = document.getElementById('input_salary_0').value;
    if (document.getElementById('input_name_0').value == ""){
      alert("Nimi puudu");
      return;
    }
     if (document.getElementById('input_idCode_0').value == ""){
      alert("Isikukood puudu");
      return;
    }
     if (document.getElementById('input_salary_0').value == ""){
      alert("Palk puudu");
      return;
    }
    var sotsmaks = 0;
    var ttkindlustus = 0.008*salary;
    if (salary <=0){
      alert("Nii vähe ei saa maksta");
      return;
    }
    if (salary <= 500){
      sotsmaks = 155.1;
      tulumaks = 0;
    }else {
      sotsmaks = salary*0.33;
      tulumaks = salary*0.2;
    }
    brutopalk = salary*0.747;
    var kpension = 0;

   var tkindlustus = 0.016*brutopalk;
    if (document.getElementById("kogumispension").checked){
      kpension = 0.02*brutopalk;
    }
    var netopalk = brutopalk*0.905;

    document.getElementById("sotsiaalmaks_0").innerHTML = sotsmaks + " €";
    document.getElementById("tulumaks_0").innerHTML = tulumaks + " €";
    document.getElementById("ttkindlustus_0").innerHTML = ttkindlustus + " €";
    document.getElementById("bruto_0").innerHTML = brutopalk + " €";
    document.getElementById("tkindlustus_0").innerHTML = tkindlustus + " €";
    document.getElementById("kpension_0").innerHTML = kpension + " €";
    document.getElementById("neto_0").innerHTML = netopalk + " €";

  }
  </script>
  <title>Projekt</title>
</head>
<body>
  <div class="nav_menu">
  <button class="nav_btn">Menüü</button>
  <div class="nav_content">
    <a href="lisa1.html">Lisa 1</a>
    <a href="#">blabla</a>
    <a href="#">blablabla</a>
  </div>
</div>
<div class="main_content">
    <div class="input">
       <form action="JavaScript:void(0)">
  <div class = "input_name">
  Nimi:
  <br>
  <input type="text" id="input_name_0" placeholder="Mart Tamm" title="Nimi">
</div>

  <div class="input_idCode">
  Isikukood:
  <br>
  <input type="number" id="input_idCode_0" placeholder="31234567890" title="Isikukood">
</div>

  <div class = "input_salary">
  Palk<br>
  <input type="number" title="Palk" id="input_salary_0" placeholder="639">
  
  </div>
  <div class = "input_workLoad">
  Tööaja määr:<br>
  <input type="number" id="input_workLoad_0" placeholder="1" value = "1">
  <br>Kogumispension:<input type="checkbox" id="kogumispension">
<br><br>

<div class=calendar>
<div id="date" title="Kalender">
  <div id="dateSelection" class="container">
    <center>
    Algus päev:
    <input id="startDate" readonly onclick="showCalendar('start')"/><br />
    Lõpp päev:
    <input id="endDate" readonly onclick="showCalendar('end')"/><br />

    <div id="v-cal">
      <div class="vcal-header">
        <button id="prevBtn" class="vcal-btn" data-calendar-toggle="previous">
          <svg height="24" version="1.1" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path>
          </svg>
        </button>

        <div class="vcal-header__label" data-calendar-label="month">
          March 2017
        </div>


        <button id="nextBtn" class="vcal-btn" data-calendar-toggle="next">
          <svg height="24" version="1.1" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"></path>
          </svg>
        </button>
      </div>
      <div class="vcal-week">
        <span>E</span>
        <span>T</span>
        <span>K</span>
        <span>N</span>
        <span>R</span>
        <span>L</span>
        <span>P</span>
      </div>
      <div class="vcal-body" data-calendar-area="month"></div>
      <div id="okBtnStart" class="okButtonArea">
        <button data-calendar-toggle="startDayBtn" class="okButton">OK</button>
      </div>
      <div id="okBtnEnd" class="okButtonArea">
        <button data-calendar-toggle="endDayBtn" class="okButton">OK</button>
      </div>
      <p class="demo-picked">
        Valitud kuupäev:
        <span data-calendar-label="picked"></span>
      </p>
    </div>
    <div id="selectionResult">
      <p>
        <span id="cap"></span>
        <span id="freeDays"></span>
        <span id="offDays"></span>
      </p>
    </div>
    </center>
  </div>
</div>
    <input type="image" id="CalendarButton" onclick="CalendarOn()" src="calendar-icon.png" />
    <br>
    Haiguspäevade arv:<div id="sick_days_0">
    0
  </div>
</div>
<br>
<button onclick="salaryCalcziak()">Arvutas</button>

</form>   
    </div>
    <div class="output">
      <div class="outputLeft">
      SM:<div id="sotsiaalmaks_0">0</div>
      <br>
      TM:<div id="tulumaks_0">0</div>
      <br>
      TTK: <div id="ttkindlustus_0">0</div>
      <br>
      Bruto:<div id="bruto_0">0</div></div><br>
      <div class="outputRight">
      TK: <div id="tkindlustus_0">0</div>
      <br>
      KP: <div id="kpension_0">0</div>
      <br> 
      Neto: <div id="neto_0">0</div>
      <br>
  </div>
</div>
</div>
    <div id="addedRows"></div>

<!--<div class="row">
<button class="btn new_row" onclick="newRow(this.form);" type="button">Lisa uus väli</button>
<button class="btn delete_row" onclick="deleteRow()"> delete me or i'll kill you bitch   
</div>    -->
<input type="file" id="inputfile">
    </body>

    <div id = "calculator_box">
      <iframe id="calculator" src="kalkulaator\CLWcalc ver5.1.html" frameborder="0" width="362" height="350"></iframe>

  </div>
  <script>
    var rowCount = 1;
  function newRow(frm){
    rowCount++;
    var row = 
    '<div class="main_conent'+rowCount+'"><div class="input'+rowCount+'"><form action="#">Nimi:<br><input type="text" name="input_name_'+rowCount+'" placeholder="Mart Tamm" title="Nimi"><br>Isikukood:<br><input type="number" name="input_idCode'+rowCount+'"placeholder="31234567890" title="Isikukood"><br>Palk<br><div class="input_salary" title="Palk"><input type="number" name="input_salary'+rowCount+'"></div><br><br><input type="submit" value="Submit"><div id="date" title="Kalender" onclick="CalendarOff()">kalender goes here</div><button id="CalendarButton" onclick="CalendarOn()">Ava Kalender</button></form><p>Väli1</p><p>Väli2</p></div><div class="output"><p>Väli3</p><p>Väli4</p></div></div>';

  jQuery('#addedRows').append(row);
  }
  
function CalendarOn() {
    document.getElementById("date").style.display = "block";
    document.getElementById("date").addEventListener("click", function(event) {
      if (!document.getElementById('dateSelection').contains(event.target)) {
        document.getElementById("date").style.display = "none";
      }
    });
}

  </script>
  <script src="js/Calendar.js" type="text/javascript"></script>
  <script>
    function showCalendar(selection) {
      document.getElementById("v-cal").style.display = "block";
      okBtnSelection = selection;
    }

    window.addEventListener('load', function () {
      vanillaCalendar.init({
        disablePastDays: false//true
      });
    })
  </script> 
  <script>
document.getElementById('inputfile').onchange = function(){

  var file = this.files[0];

  var reader = new FileReader();
  reader.onload = function(progressEvent){
    // Entire file
    //console.log(this.result);

    // By lines
    var lines = this.result.split('\n');
    for(var line = 0; line < lines.length; line++){
      console.log(lines[line]);
      switch(line){
        case 0:
        var input_name=lines[line];
        break
        case 1:
        var input_idCode= +lines[line];
        break
        case 2:
        var input_salary= +lines[line];
        break
         case 3:
        var input_workLoad= +lines[line];
        break
        case 4:
        var sotsiaalmaks=lines[line];
        break
        case 5:
        var tulumaks=lines[line];
        break
        case 6:
        var ttkindlustus=lines[line];
        break
         case 7:
        var brutopalk=lines[line];
        break
        case 8:
        var tkindlustus=lines[line];
        break
        case 9:
        var kpension=lines[line];
        break
        case 10:
        var netopalk=lines[line];


      }
    }
         document.getElementById("input_name_0").value = input_name;
         document.getElementById("input_idCode_0").value = input_idCode;
         document.getElementById("input_salary_0").value = input_salary;
         document.getElementById("input_workLoad_0").value = input_workLoad;
         document.getElementById("sotsiaalmaks_0").innerHTML = sotsiaalmaks+" €";
         document.getElementById("tulumaks_0").innerHTML = tulumaks+" €";
         document.getElementById("ttkindlustus_0").innerHTML = ttkindlustus+" €";
         document.getElementById("bruto_0").innerHTML = brutopalk+" €";
         document.getElementById("tkindlustus_0").innerHTML = tkindlustus+" €";
         document.getElementById("kpension_0").innerHTML = kpension+" €";
         document.getElementById("neto_0").innerHTML = netopalk+" €";

  };
  reader.readAsText(file);
};
</script>

<footer>
</footer>
</html>